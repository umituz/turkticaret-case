{
  "info": {
    "name": "Orders",
    "description": "Order management endpoints for creating and viewing orders",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Create Order from Cart",
      "request": {
        "method": "POST",
        "body": {
          "mode": "raw",
          "raw": "{\n  \"shipping_address\": \"123 Main St, City, Country 12345\",\n  \"notes\": \"Please ring the doorbell. Leave at front door if no answer.\"\n}",
          "options": {"raw": {"language": "json"}}
        },
        "url": {
          "raw": "{{base_url}}/orders",
          "host": ["{{base_url}}"],
          "path": ["orders"]
        },
        "description": "Create a new order from current user's cart items"
      },
      "response": []
    },
    {
      "name": "Get User Orders",
      "request": {
        "method": "GET",
        "url": {
          "raw": "{{base_url}}/orders?page=1&per_page=10",
          "host": ["{{base_url}}"],
          "path": ["orders"],
          "query": [
            {"key": "page", "value": "1", "description": "Page number"},
            {"key": "per_page", "value": "10", "description": "Items per page"}
          ]
        },
        "description": "Get all orders for the authenticated user with pagination"
      },
      "response": []
    },
    {
      "name": "Get Order Details",
      "request": {
        "method": "GET",
        "url": {
          "raw": "{{base_url}}/orders/{{order_uuid}}",
          "host": ["{{base_url}}"],
          "path": ["orders", "{{order_uuid}}"]
        },
        "description": "Get detailed information about a specific order"
      },
      "response": []
    },
    {
      "name": "Order Workflow",
      "description": "Complete order workflow from cart to order creation",
      "item": [
        {
          "name": "1. Add Items to Cart",
          "request": {
            "method": "POST",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"product_uuid\": \"{{product_uuid}}\",\n  \"quantity\": 2\n}",
              "options": {"raw": {"language": "json"}}
            },
            "url": {
              "raw": "{{base_url}}/cart/add",
              "host": ["{{base_url}}"],
              "path": ["cart", "add"]
            },
            "description": "Step 1: Add products to cart"
          },
          "response": []
        },
        {
          "name": "2. Review Cart",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/cart",
              "host": ["{{base_url}}"],
              "path": ["cart"]
            },
            "description": "Step 2: Review cart contents before ordering"
          },
          "response": []
        },
        {
          "name": "3. Create Order",
          "request": {
            "method": "POST",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"shipping_address\": \"456 Oak Avenue, Apartment 2B, Metropolitan City, Country 54321\",\n  \"notes\": \"Handle with care - fragile items inside\"\n}",
              "options": {"raw": {"language": "json"}}
            },
            "url": {
              "raw": "{{base_url}}/orders",
              "host": ["{{base_url}}"],
              "path": ["orders"]
            },
            "description": "Step 3: Create order from cart items"
          },
          "response": []
        },
        {
          "name": "4. Verify Empty Cart",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/cart",
              "host": ["{{base_url}}"],
              "path": ["cart"]
            },
            "description": "Step 4: Verify cart is cleared after order creation"
          },
          "response": []
        },
        {
          "name": "5. View Created Order",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/orders/{{order_uuid}}",
              "host": ["{{base_url}}"],
              "path": ["orders", "{{order_uuid}}"]
            },
            "description": "Step 5: View the newly created order details"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Error Scenarios",
      "description": "Test error handling and validation",
      "item": [
        {
          "name": "Create Order with Empty Cart",
          "request": {
            "method": "POST",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"shipping_address\": \"123 Test Street, Test City\",\n  \"notes\": \"This should fail\"\n}",
              "options": {"raw": {"language": "json"}}
            },
            "url": {
              "raw": "{{base_url}}/orders",
              "host": ["{{base_url}}"],
              "path": ["orders"]
            },
            "description": "Try to create order when cart is empty - should fail"
          },
          "response": []
        },
        {
          "name": "Create Order without Shipping Address",
          "request": {
            "method": "POST",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"notes\": \"Missing shipping address\"\n}",
              "options": {"raw": {"language": "json"}}
            },
            "url": {
              "raw": "{{base_url}}/orders",
              "host": ["{{base_url}}"],
              "path": ["orders"]
            },
            "description": "Try to create order without shipping address - should fail validation"
          },
          "response": []
        },
        {
          "name": "Create Order with Short Address",
          "request": {
            "method": "POST",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"shipping_address\": \"Short\",\n  \"notes\": \"Address too short\"\n}",
              "options": {"raw": {"language": "json"}}
            },
            "url": {
              "raw": "{{base_url}}/orders",
              "host": ["{{base_url}}"],
              "path": ["orders"]
            },
            "description": "Try to create order with very short address - should fail validation"
          },
          "response": []
        },
        {
          "name": "Access Another User's Order",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/orders/invalid-uuid-or-other-user",
              "host": ["{{base_url}}"],
              "path": ["orders", "invalid-uuid-or-other-user"]
            },
            "description": "Try to access order that doesn't belong to current user - should be forbidden"
          },
          "response": []
        }
      ]
    }
  ]
}